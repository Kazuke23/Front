<div class="purchase-form-page">
  <div class="form-header">
    <h1>CREAR COMPRAS</h1>
    <button class="back-btn" (click)="goBack()">Volver</button>
  </div>

  <div class="form-content">
    <div class="form-section">
      <h2 class="section-title">NUEVA COMPRA</h2>
      <form [formGroup]="form" (ngSubmit)="submit()" class="purchase-form">
        <div class="form-fields">
          <div class="form-field" [ngClass]="getFieldClass('name')">
            <label for="name">Nombre</label>
            <input
              type="text"
              id="name"
              formControlName="name"
              placeholder="Nombre de la compra"
            />
            <span class="error-message" *ngIf="form.get('name')?.touched && form.get('name')?.invalid">
              El nombre es requerido
            </span>
          </div>

          <div class="form-field" [ngClass]="getFieldClass('date')">
            <label for="date">Fecha</label>
            <input
              type="date"
              id="date"
              formControlName="date"
            />
            <span class="error-message" *ngIf="form.get('date')?.touched && form.get('date')?.invalid">
              La fecha es requerida
            </span>
          </div>

          <div class="form-field" [ngClass]="getFieldClass('value')">
            <label for="value">Valor</label>
            <input
              type="number"
              id="value"
              formControlName="value"
              placeholder="Valor de la compra"
              step="0.01"
              min="0"
            />
            <span class="error-message" *ngIf="form.get('value')?.touched && form.get('value')?.invalid">
              El valor es requerido
            </span>
          </div>

          <div class="form-field" [ngClass]="getFieldClass('supplier_id')">
            <label for="supplier">Proveedores</label>
            <select id="supplier" formControlName="supplier_id">
              <option value="">Seleccionar proveedor</option>
              <option *ngFor="let supplier of suppliers" [value]="supplier.id">
                {{ supplier.name }}
              </option>
            </select>
            <span class="error-message" *ngIf="form.get('supplier_id')?.touched && form.get('supplier_id')?.invalid">
              El proveedor es requerido
            </span>
          </div>

          <div class="form-field" [ngClass]="getFieldClass('restaurant_id')">
            <label for="restaurant">Restaurantes</label>
            <select id="restaurant" formControlName="restaurant_id">
              <option value="">Seleccionar restaurante</option>
              <option *ngFor="let restaurant of restaurants" [value]="restaurant.id">
                {{ restaurant.name }}
              </option>
            </select>
            <span class="error-message" *ngIf="form.get('restaurant_id')?.touched && form.get('restaurant_id')?.invalid">
              El restaurante es requerido
            </span>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="cancel-btn" (click)="cancel()">Cancelar</button>
          <button type="submit" class="submit-btn" [disabled]="loading">
            {{ loading ? 'Guardando...' : 'Guardar compra' }}
          </button>
        </div>
      </form>
    </div>

    <div class="form-image">
      <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?auto=format&fit=crop&w=1200&q=80" alt="Frutas y verduras frescas" />
    </div>
  </div>
</div>
